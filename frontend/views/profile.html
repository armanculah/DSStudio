<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Profile - Data Structures Studio</title>
</head>
<body class="min-h-screen bg-gray-50 text-gray-900">
  <!-- Navigation -->
  <nav class="bg-white border-b border-gray-200">
    <div class="max-w-5xl mx-auto px-6 py-4">
      <div class="flex flex-wrap gap-4 justify-between items-center">
        <div class="flex items-center gap-6">
          <a href="/index.html" class="text-xl font-bold text-purple-700 hover:text-purple-800 transition-colors">
            Data Structures Studio
          </a>
          <div class="flex gap-4 text-sm sm:text-base text-gray-600">
            <a href="/views/playground.html" class="hover:text-purple-700 transition-colors">Playground</a>
          </div>
        </div>
        <div class="flex items-center gap-4">
          <div class="flex items-center gap-3" data-nav-auth="logged-out">
            <a href="/views/login.html" class="text-gray-600 hover:text-purple-700 transition-colors">Login</a>
            <a href="/views/signup.html" class="text-gray-600 hover:text-purple-700 transition-colors">Sign up</a>
          </div>
          <a
            href="/views/profile.html"
            class="hidden flex-col items-center gap-1 text-gray-700 hover:text-purple-700 transition-colors"
            data-nav-auth="logged-in"
            data-nav-profile-link
          >
            <img
              src="/profile-placeholder.svg"
              alt="Profile avatar"
              class="nav-avatar"
              data-nav-profile-avatar
            >
            <span class="text-xs font-medium text-center" data-nav-profile-name>Profile</span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-5xl mx-auto p-6 space-y-8">
    <header>
      <p class="text-sm uppercase tracking-wide text-gray-500 mb-1">Your account</p>
      <h2 class="text-3xl font-bold text-gray-900">Profile & Settings</h2>
      <p class="text-gray-600 mt-2 max-w-2xl">
        Review your personal details, manage saved examples, and update security preferences.
      </p>
    </header>

    <section class="grid gap-6 lg:grid-cols-3">
      <!-- Profile Summary -->
      <div class="space-y-6">
        <div class="ds-card text-center space-y-4">
          <div class="relative inline-block">
            <img 
              id="profileImage" 
              src="/profile-placeholder.svg" 
              alt="Profile picture" 
              class="ds-avatar mx-auto"
            >
            <button 
              id="changePictureBtn" 
              class="absolute bottom-3 right-4 ds-btn ds-btn-secondary text-xs py-1 px-2"
              type="button"
            >
              Change
            </button>
            <input 
              id="profilePictureInput" 
              type="file" 
              accept="image/png,image/jpeg"
              class="hidden"
            >
          </div>
          <div>
            <h3 id="userFullName" class="text-xl font-semibold text-gray-900">Loading…</h3>
            <p id="userEmail" class="text-gray-600 text-sm">Not provided yet</p>
          </div>
          <div class="space-y-3 pt-2">
            <button id="editProfileBtn" class="w-full ds-btn ds-btn-secondary" type="button">
              Edit profile
            </button>
            <button id="settingsBtn" class="w-full ds-btn ds-btn-outline" type="button">
              Account settings
            </button>
            <button id="logoutBtn" class="w-full ds-btn bg-red-500 text-white hover:bg-red-600 focus:ring-red-500" type="button">
              Logout
            </button>
          </div>
          <div id="profileMessage" class="text-sm text-gray-500 min-h-[1.5rem]" aria-live="polite"></div>
        </div>
      </div>

      <!-- Details -->
      <div class="lg:col-span-2 space-y-6">
        <div class="ds-card space-y-6">
          <div>
            <h3 class="text-lg font-semibold text-gray-900">Personal Information</h3>
            <p class="text-sm text-gray-500">Visible to your Data Structures Studio account.</p>
          </div>
          <dl class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            <div>
              <dt class="text-sm text-gray-500">Name</dt>
              <dd id="detailName" class="text-base font-medium text-gray-900">Not provided yet</dd>
            </div>
            <div>
              <dt class="text-sm text-gray-500">Surname</dt>
              <dd id="detailSurname" class="text-base font-medium text-gray-900">Not provided yet</dd>
            </div>
            <div class="sm:col-span-2">
              <dt class="text-sm text-gray-500">Email</dt>
              <dd id="detailEmail" class="text-base font-medium text-gray-900 break-words">Not provided yet</dd>
            </div>
          </dl>
        </div>

        <div class="ds-card">
          <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
            <div>
              <h3 class="text-lg font-semibold text-gray-900">Saved Visualizations</h3>
              <p class="text-sm text-gray-500">Reuse your favorite playground states from here.</p>
            </div>
            <span id="exampleCount" class="ds-tag self-start md:self-auto">0 saved</span>
          </div>
          <div id="savedExamplesList" class="grid gap-4 md:grid-cols-2">
            <p class="text-sm text-gray-500 md:col-span-2">No saved visualizations yet. Save one from the playground to see it listed here.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-white border-t border-gray-200 mt-12">
    <div class="max-w-5xl mx-auto px-6 py-8 text-center flex flex-col items-center gap-3">
      <img src="/media/ibu.png" alt="International Burch University logo" class="h-12 object-contain" />
      <p class="text-sm text-gray-600">
        This Bachelor’s thesis was completed as part of the Senior Design Project at International Burch University by Arman Ćulah, under the supervision of MSc. Aldin Kovačević. The author extends special thanks to the mentor, staff, testers, and all supporters.
      </p>
      <p class="text-sm text-gray-600">
        © 2025 International Burch University. All rights reserved.
      </p>
      <a href="https://www.ibu.edu.ba" class="text-sm font-semibold text-purple-700 hover:text-purple-800 underline">
        www.ibu.edu.ba
      </a>
    </div>
  </footer>

  <!-- Edit Profile Modal -->
  <div id="profileModal" class="hidden ds-modal" role="dialog" aria-modal="true">
    <div class="ds-card ds-modal-card">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-semibold text-gray-900">Edit Profile</h3>
        <button id="closeProfileModal" class="text-sm text-gray-500 hover:text-gray-700" type="button">
          Close
        </button>
      </div>
      <form id="profileForm" class="space-y-4">
        <div>
          <label for="formName" class="block text-sm font-medium text-gray-700 mb-1">Name</label>
          <input id="formName" type="text" class="ds-input" required>
        </div>
        <div>
          <label for="formSurname" class="block text-sm font-medium text-gray-700 mb-1">Surname</label>
          <input id="formSurname" type="text" class="ds-input" required>
        </div>
        <div>
          <label for="formEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
          <input id="formEmail" type="email" class="ds-input" required>
        </div>
        <button class="w-full ds-btn ds-btn-primary" type="submit">
          Save changes
        </button>
      </form>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="hidden ds-modal" role="dialog" aria-modal="true">
    <div class="ds-card ds-modal-card space-y-4">
      <div class="flex items-center justify-between">
        <h3 class="text-xl font-semibold text-gray-900">Account Settings</h3>
        <button id="closeSettingsModal" class="text-sm text-gray-500 hover:text-gray-700" type="button">
          Close
        </button>
      </div>

      <section>
        <h4 class="text-lg font-semibold text-gray-900">Change Password</h4>
        <form id="passwordForm" class="space-y-3 mt-3">
          <div>
            <label for="currentPassword" class="block text-sm font-medium text-gray-700 mb-1">
              Current password
            </label>
            <input id="currentPassword" type="password" class="ds-input" required minlength="8">
          </div>
          <div>
            <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-1">
              New password
            </label>
            <input id="newPassword" type="password" class="ds-input" required minlength="8">
          </div>
          <button class="w-full ds-btn ds-btn-primary" type="submit">
            Update password
          </button>
          <div id="passwordMessage" class="text-sm text-gray-500 min-h-[1.25rem]" aria-live="polite"></div>
        </form>
      </section>

      <section class="border-t border-gray-200 pt-4">
        <h4 class="text-lg font-semibold text-gray-900">Danger zone</h4>
        <p class="text-sm text-gray-500 mb-3">
          Deleting your account removes all saved examples and learning progress. This action is irreversible.
        </p>
        <button id="deleteAccountBtn" class="w-full ds-btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-600" type="button">
          Delete account
        </button>
      </section>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
  <script type="module" src="/src/profile.js"></script>
</body>
</html>
